<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-extensibility" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Extensibility | AIConfig</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aiconfig.lastmileai.dev/img/readme_logo.jpg"><meta data-rh="true" name="twitter:image" content="https://aiconfig.lastmileai.dev/img/readme_logo.jpg"><meta data-rh="true" property="og:url" content="https://aiconfig.lastmileai.dev/docs/extensibility"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Extensibility | AIConfig"><meta data-rh="true" name="description" content="Extending AIConfig"><meta data-rh="true" property="og:description" content="Extending AIConfig"><link data-rh="true" rel="icon" href="/img/favicon-light-theme.ico"><link data-rh="true" rel="canonical" href="https://aiconfig.lastmileai.dev/docs/extensibility"><link data-rh="true" rel="alternate" href="https://aiconfig.lastmileai.dev/docs/extensibility" hreflang="en"><link data-rh="true" rel="alternate" href="https://aiconfig.lastmileai.dev/docs/extensibility" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MXLMDZIH1G-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JYD7V9L7DR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JYD7V9L7DR",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="AIConfig" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d55df971.css">
<script src="/assets/js/runtime~main.30e176f0.js" defer="defer"></script>
<script src="/assets/js/main.91609d34.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/aiConfigLogo_Dark.svg" alt="AI Config Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/aiConfigLogo_Light.svg" alt="AI Config Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/basics">Overview</a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/docs/overview/ai-config-format">Specification</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lastmile-ai/aiconfig" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.com/invite/xBhNKTetGx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord Community"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/basics">What is AIConfig</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/usage-guide">Usage Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/overview">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/cookbooks--guides">Cookbooks &amp; Guides</a><button aria-label="Expand sidebar category &#x27;Cookbooks &amp; Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/extensibility">Extensibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">Roadmap</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Extensibility</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Extensibility</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extending-aiconfig">Extending AIConfig<a href="#extending-aiconfig" class="hash-link" aria-label="Direct link to Extending AIConfig" title="Direct link to Extending AIConfig">​</a></h2>
<p>AIConfig is designed to be customized and extended for your use-case. There are some key extension points for AIConfig:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bring-your-own-model">Bring your own Model<a href="#bring-your-own-model" class="hash-link" aria-label="Direct link to Bring your own Model" title="Direct link to Bring your own Model">​</a></h3>
<p>You can use any generative AI model with the <code>aiconfig</code> format. All you need to do is define a <code>ModelParser</code> class. This class is responsible for 3 key operations:</p>
<ul>
<li><strong>serialize</strong> prompts, model parameters and inference outputs into an <code>aiconfig</code>.</li>
<li><strong>deserialize</strong> existing <code>aiconfig</code> <code>Prompts</code> for that model into the data that the model accepts (e.g. OpenAI chat completion params).</li>
<li><strong>run</strong> inference using a model (e.g. calling the OpenAI API or a model running locally).</li>
</ul>
<h1>Defining Your Own Model Parser</h1>
<p>In this guide, you will learn the basics of defining your own custom Model Parser for use in the AIConfig library. Model Parsers play a crucial role in managing and interacting with AI models within the AIConfig SDK. You can create custom Model Parsers to suit your specific needs and integrate them seamlessly into AIConfig.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="modelparser-class">ModelParser Class<a href="#modelparser-class" class="hash-link" aria-label="Direct link to ModelParser Class" title="Direct link to ModelParser Class">​</a></h2>
<p>The <code>ModelParser</code> is an abstract base class that serves as the foundation for all Model Parsers. It defines a set of methods and behaviors that any Model Parser implementation must adhere to. Below are the key methods defined in the <code>ModelParser</code> class:</p>
<ul>
<li><code>id()</code>
Returns an identifier for the model parser (e.g., &quot;OpenAIModelParser, HuggingFaceTextGeneration&quot;, etc.).</li>
<li><code>serialize()</code>
Serialize a prompt and additional metadata/model settings into a <code>Prompt</code> object that can be saved in the AIConfig.</li>
<li><code>deserialize()</code>
Deserialize a <code>Prompt</code> object loaded from an AIConfig into a structure that can be used for model inference.</li>
<li><code>run()</code>
Execute model inference based on completion data constructed in the <code>deserialize()</code> method. It saves the response or output in <code>prompt.outputs</code>.</li>
<li><code>get_output_text()</code>: Get the output text from the output object containing model inference response.</li>
<li><code>get_model_settings()</code>: Extract the AI model&#x27;s settings from the AIConfig</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="model-parser-extensibility">Model Parser Extensibility<a href="#model-parser-extensibility" class="hash-link" aria-label="Direct link to Model Parser Extensibility" title="Direct link to Model Parser Extensibility">​</a></h2>
<p>When defining your custom Model Parser, you can inherit from the <code>ModelParser</code> class and override its methods as needed to customize the behavior for your specific AI models. This extensibility allows you to seamlessly integrate your Model Parser into the AIConfig framework and manage AI models with ease.</p>
<p>Here are some helpful resources to get started:</p>
<ol>
<li><code>ModelParser</code> class (<a href="https://github.com/lastmile-ai/aiconfig/blob/main/python/src/aiconfig/model_parser.py" target="_blank" rel="noopener noreferrer">Python</a>, <a href="https://github.com/lastmile-ai/aiconfig/blob/main/typescript/lib/modelParser.ts" target="_blank" rel="noopener noreferrer">TypeScript</a>).</li>
<li>OpenAI Chat <code>ModelParser</code> (<a href="https://github.com/lastmile-ai/aiconfig/blob/main/python/src/aiconfig/default_parsers/openai.py#L25" target="_blank" rel="noopener noreferrer">Python</a>, <a href="https://github.com/lastmile-ai/aiconfig/blob/main/typescript/lib/parsers/openai.ts#L261" target="_blank" rel="noopener noreferrer">TypeScript</a>)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameterized-model-parser">Parameterized Model Parser<a href="#parameterized-model-parser" class="hash-link" aria-label="Direct link to Parameterized Model Parser" title="Direct link to Parameterized Model Parser">​</a></h3>
<p>In some cases, you may want to create a specialized Model Parser that handles parameterization of prompts. The <code>ParameterizedModelParser</code> is an abstract subclass of <code>ModelParser</code> that provides additional methods and utilities for parameterization.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quick-note-on-parameterization">Quick Note On Parameterization:<a href="#quick-note-on-parameterization" class="hash-link" aria-label="Direct link to Quick Note On Parameterization:" title="Direct link to Quick Note On Parameterization:">​</a></h4>
<p>In AIConfig, parameters refer to the handlebar syntax used by prompt inputs to denote a placeholder for another value. See # Parameters and Chaining Prompts section</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-parser-extensibility-with-parameterization">Model Parser Extensibility with Parameterization<a href="#model-parser-extensibility-with-parameterization" class="hash-link" aria-label="Direct link to Model Parser Extensibility with Parameterization" title="Direct link to Model Parser Extensibility with Parameterization">​</a></h3>
<p>When defining your own custom Model Parser, you can choose to inherit from the <code>ParameterizedModelParser</code> class to take advantage of the parameterization features provided by AIConfig. This allows you to create model parsers that can handle prompts with placeholders and dynamically replace them with actual values during serialization and deserialization.</p>
<p>By incorporating parameterization into your model parser, you can create AIConfigs that are more flexible and adaptable to different use cases, as well as facilitate the customization of prompt templates to meet specific requirements.</p>
<p>Another notable benefit of using parameterization is the ability to leverage the <code>run_with_dependencies</code> feature. The <code>run_with_dependencies</code> API method allows you to execute prompts with resolved dependencies and prompt references, providing more advanced control over the model&#x27;s behavior.</p>
<p>The <code>ParameterizedModelParser</code> class and associated helper utilities empower you to harness the power of parameterization in your AI configuration management, offering greater flexibility and control over how prompts are processed and used in model inference.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="helper-utils-provided-with-the-parameterized-model-parser-class">Helper Utils provided with the Parameterized Model Parser Class<a href="#helper-utils-provided-with-the-parameterized-model-parser-class" class="hash-link" aria-label="Direct link to Helper Utils provided with the Parameterized Model Parser Class" title="Direct link to Helper Utils provided with the Parameterized Model Parser Class">​</a></h3>
<p>The <code>ParameterizedModelParser</code> class extends the capabilities of the base <code>ModelParser</code> and includes the following methods:</p>
<ul>
<li>Python <code>resolve_prompt_template()</code> TypeScript: <code>resolve_prompt_template()</code>
Resolves a templated string with provided parameters, allowing for dynamic prompt generation.</li>
<li>Python <code>get_prompt_template()</code> TypeScript: <code>get_prompt_template()</code>
An overrideable method that returns a template for a prompt. Customize this method to specify how prompt templates are extracted from prompts.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-helper-utilities-for-parameterization">General Helper Utilities for Parameterization<a href="#general-helper-utilities-for-parameterization" class="hash-link" aria-label="Direct link to General Helper Utilities for Parameterization" title="Direct link to General Helper Utilities for Parameterization">​</a></h3>
<p>To facilitate parameterization, AIConfig provides a set of helper utilities:</p>
<ul>
<li>Python: <code>resolve_parameters()</code> TypeScript: <code>resolveParameters()</code>
Resolves parameters within a given string by substituting placeholders with actual values.</li>
<li>Python: <code>resolve_prompt_string()</code> TypeScript: <code>resolve_prompt_string()</code>
Resolves a templated string with parameters, similar to the <code>resolve_prompt_template()</code> method of the <code>ParameterizedModelParser</code> class.</li>
<li>Python: <code>resolve_parametrized_prompt()</code> TypeScript: <code>resolve_parametrized_prompt() </code>
Resolves a parametrized prompt by substituting parameter placeholders with their corresponding values.</li>
<li>Python: <code>resolve_system_prompt()</code> TypeScript: <code>resolve_system_prompt() </code>
Resolves system prompts, often used in multi-turn conversations, by applying parameterization to system prompt templates.</li>
</ul>
<p>These utilities enable dynamic parameterization of prompts and customization of prompt templates to meet specific requirements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="contributing">Contributing<a href="#contributing" class="hash-link" aria-label="Direct link to Contributing" title="Direct link to Contributing">​</a></h3>
<p>Have a custom <code>ModelParser</code> implementation that others may find useful? Please consider packaging it as an AIConfig Extension by following our <a href="https://aiconfig.lastmileai.dev/docs/contributing" target="_blank" rel="noopener noreferrer">Contributing Guidelines</a>!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="callback-handlers">Callback handlers<a href="#callback-handlers" class="hash-link" aria-label="Direct link to Callback handlers" title="Direct link to Callback handlers">​</a></h2>
<p>The AIConfig SDK has a <code>CallbackManager</code> class which can be used to register callbacks that trace prompt resolution, serialization, deserialization, and inference. This lets you get a stack trace of what&#x27;s going on under the covers, which is especially useful for complex control flow operations.</p>
<p>Anyone can register a callback, and filter for the events they care about. You can subsequently use these callbacks to integrate with your own monitoring and observability systems.</p>
<p>Video: <a href="https://github.com/lastmile-ai/aiconfig/assets/141073967/ce909fc4-881f-40d9-9c67-78a6682b3063" target="_blank" rel="noopener noreferrer">https://github.com/lastmile-ai/aiconfig/assets/141073967/ce909fc4-881f-40d9-9c67-78a6682b3063</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="structure-of-a-callback-event">Structure of a Callback Event<a href="#structure-of-a-callback-event" class="hash-link" aria-label="Direct link to Structure of a Callback Event" title="Direct link to Structure of a Callback Event">​</a></h4>
<p>Each callback event is an object of the CallbackEvent type, containing:</p>
<p><code>name</code>: The name of the event (e.g., &quot;on_resolve_start&quot;).<br>
<code>file</code>: The source file where the event is triggered<br>
<code>data</code>: An object containing relevant data for the event, such as parameters or results.<br>
<code>ts_ns</code>: An optional timestamp in nanoseconds.\</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="writing-custom-callbacks">Writing Custom Callbacks<a href="#writing-custom-callbacks" class="hash-link" aria-label="Direct link to Writing Custom Callbacks" title="Direct link to Writing Custom Callbacks">​</a></h4>
<p>Custom callbacks are functions that conform to the Callback type. They receive a CallbackEvent object containing event details, and return a Promise. Here&#x27;s an example of a simple logging callback:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> myLoggingCallback</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">Callback</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token builtin" style="color:#2aa198">console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token template-string string" style="color:#8dc891">Event triggered: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#657b83">${</span><span class="token template-string interpolation">event</span><span class="token template-string interpolation punctuation" style="color:#657b83">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#657b83">}</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">my_logging_callback</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">-</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">None</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">print</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string-interpolation string" style="color:#8dc891">f&quot;Event triggered: </span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">{</span><span class="token string-interpolation interpolation">event</span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">}</span><span class="token string-interpolation string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sample output:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token maybe-class-name">Event</span><span class="token plain"> triggered</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> on_resolve_start</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function maybe-class-name" style="color:#79b6f2">CallbackEventModel</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&#x27;on_resolve_start&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> file</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&#x27;/Users/John/Projects/aiconfig/python/src/aiconfig/Config.py&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> data</span><span class="token operator" style="color:#fc929e">=</span><span class="token punctuation" style="color:#657b83">{</span><span class="token string-property property" style="color:#2aa198">&#x27;prompt_name&#x27;</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;get_activities&#x27;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#2aa198">&#x27;params&#x27;</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token maybe-class-name">None</span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> ts_ns</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1700094936363867000</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token maybe-class-name">Event</span><span class="token plain"> triggered</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> on_deserialize_start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-a-callbackmanager-and-registering-callbacks">Setting up a CallbackManager and Registering Callbacks<a href="#setting-up-a-callbackmanager-and-registering-callbacks" class="hash-link" aria-label="Direct link to Setting up a CallbackManager and Registering Callbacks" title="Direct link to Setting up a CallbackManager and Registering Callbacks">​</a></h4>
<p>To register this callback with the AIConfigRuntime, include it in the array of callbacks when creating a CallbackManager:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> myCustomCallback</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">Callback</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token builtin" style="color:#2aa198">console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token template-string string" style="color:#8dc891">Event triggered: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#657b83">${</span><span class="token template-string interpolation">event</span><span class="token template-string interpolation punctuation" style="color:#657b83">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#657b83">}</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> callbackManager </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">CallbackManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">myCustomCallback</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">aiConfigRuntimeInstance</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">setCallbackManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">callbackManager</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">my_custom_callback</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">-</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">None</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">print</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string-interpolation string" style="color:#8dc891">f&quot;Event triggered: </span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">{</span><span class="token string-interpolation interpolation">event</span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:#657b83">}</span><span class="token string-interpolation string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">callback_manager </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> CallbackManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">my_custom_callback</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">aiconfigRuntimeInstance</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">set_callback_manager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">callback_manager</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="triggering-callbacks">Triggering Callbacks<a href="#triggering-callbacks" class="hash-link" aria-label="Direct link to Triggering Callbacks" title="Direct link to Triggering Callbacks">​</a></h4>
<p>Callbacks are automatically triggered at specific points in the AIConfigRuntime flow. For example, when the resolve method is called on an AIConfigRuntime instance, it triggers on_resolve_start and on_resolve_end events, which are then passed to the CallbackManager to execute any associated callbacks.</p>
<p>Sample implementation inside source code:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">resolve</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">promptName</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token builtin" style="color:#2aa198">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> params</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> JSONObject </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> startEvent </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      name</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;on_resolve_start&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      file</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> __filename</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      data</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> promptName</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> params </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">callbackManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">runCallbacks</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">startEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token doc-comment comment" style="color:#93a1a1">/** Method Implementation*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> endEvent </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      name</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;on_resolve_end&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      file</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> __filename</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      data</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> result</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> resolvedPrompt </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">callbackManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">runCallbacks</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">endEvent</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> resolvedPrompt</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">resolve</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    self</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    prompt_name</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token builtin" style="color:#2aa198">str</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    params</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#657b83">[</span><span class="token builtin" style="color:#2aa198">dict</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">None</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token operator" style="color:#fc929e">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    event </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&quot;on_resolve_start&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> __file__</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token string" style="color:#8dc891">&quot;prompt_name&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> prompt_name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;params&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> params</span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> self</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">callback_manager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">run_callbacks</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Method Implementation&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    event </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> CallbackEvent</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&quot;on_resolve_complete&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> __name__</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token string" style="color:#8dc891">&quot;result&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> response</span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> self</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">callback_manager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">run_callbacks</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Similarly, ModelParsers should trigger their own events when serializing, deserializing, and running inference. These events are also passed to the CallbackManager to execute any associated callbacks.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handling-callbacks-with-timers">Handling Callbacks with Timers<a href="#handling-callbacks-with-timers" class="hash-link" aria-label="Direct link to Handling Callbacks with Timers" title="Direct link to Handling Callbacks with Timers">​</a></h4>
<p>The CallbackManager uses a timeout mechanism to ensure callbacks do not hang indefinitely. If a callback does not complete within the specified timeout, it is aborted, and an error is logged. This timeout can be adjusted in the CallbackManager constructor and defaults to 5 if not specified.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> customTimeout </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// 10 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> callbackManager </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">CallbackManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> customTimeout</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">custom_timeout </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1"># 10 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">callback_manager </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> CallbackManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">my_logging_callback</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> custom_timeout</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling">​</a></h4>
<p>Custom callbacks should include error handling to manage exceptions. Errors thrown within callbacks are caught by the CallbackManager and can be logged or handled as needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-metadata">Custom metadata<a href="#custom-metadata" class="hash-link" aria-label="Direct link to Custom metadata" title="Direct link to Custom metadata">​</a></h2>
<p>You can store any kind of JSON-serializable metadata in an <code>aiconfig</code>. See the <a href="https://aiconfig.lastmileai.dev/docs/overview/ai-config-format#metadata" target="_blank" rel="noopener noreferrer">metadata schema details</a> to learn more.</p>
<p>To add metadata, use the <code>config.setMetadata</code> API (available in both Python and TypeScript).</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cookbooks/prompt-routing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Prompt Routing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/contributing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contributing Guidelines</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#extending-aiconfig" class="table-of-contents__link toc-highlight">Extending AIConfig</a><ul><li><a href="#bring-your-own-model" class="table-of-contents__link toc-highlight">Bring your own Model</a></li></ul></li><li><a href="#modelparser-class" class="table-of-contents__link toc-highlight">ModelParser Class</a></li><li><a href="#model-parser-extensibility" class="table-of-contents__link toc-highlight">Model Parser Extensibility</a><ul><li><a href="#parameterized-model-parser" class="table-of-contents__link toc-highlight">Parameterized Model Parser</a></li><li><a href="#model-parser-extensibility-with-parameterization" class="table-of-contents__link toc-highlight">Model Parser Extensibility with Parameterization</a></li><li><a href="#helper-utils-provided-with-the-parameterized-model-parser-class" class="table-of-contents__link toc-highlight">Helper Utils provided with the Parameterized Model Parser Class</a></li><li><a href="#general-helper-utilities-for-parameterization" class="table-of-contents__link toc-highlight">General Helper Utilities for Parameterization</a></li><li><a href="#contributing" class="table-of-contents__link toc-highlight">Contributing</a></li></ul></li><li><a href="#callback-handlers" class="table-of-contents__link toc-highlight">Callback handlers</a></li><li><a href="#custom-metadata" class="table-of-contents__link toc-highlight">Custom metadata</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/lastmile-ai/aiconfig" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.lastmileai.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/xBhNKTetGx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/LastMile" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/lastmile-ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://lastmileai.dev/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lastmileai.dev/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LastMile AI, Inc.</div></div></div></footer></div>
</body>
</html>